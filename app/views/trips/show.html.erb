<div class="trip-detail-page" style="max-width: 840px; margin: 0 auto; padding: 24px 16px 32px;">
  <div style="margin-bottom: 12px;">
    <%= link_to "← 一覧に戻る", trips_path, style: "color: #2563eb; text-decoration: none; font-size: 14px;" %>
  </div>

  <h1 style="font-size: 26px; font-weight: 800; color: #111827; margin: 0 0 12px;"><%= @trip.title %></h1>

  <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap; margin: 0 0 16px;">
    <%= link_to "編集", edit_trip_path(@trip), style: [
      "padding: 10px 14px",
      "border-radius: 10px",
      "border: 1px solid #d1d5db",
      "background: #fff",
      "color: #111827",
      "font-size: 14px",
      "font-weight: 600",
      "text-decoration: none",
      "box-shadow: 0 2px 6px rgba(0,0,0,0.04)"
    ].join('; ') %>

    <%= button_to "削除", trip_path(@trip), method: :delete,
      data: { turbo_confirm: "この旅行を削除しますか？" },
      form: { style: "margin: 0;" },
      style: [
        "padding: 10px 14px",
        "border-radius: 10px",
        "border: 1px solid #fca5a5",
        "background: #fef2f2",
        "color: #b91c1c",
        "font-size: 14px",
        "font-weight: 700",
        "cursor: pointer",
        "box-shadow: 0 2px 6px rgba(0,0,0,0.04)"
      ].join('; ') %>
  </div>

  <div style="display: grid; gap: 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.02);">
    <div>
      <p style="font-size: 13px; color: #6b7280; margin: 0 0 4px;">目的地</p>
      <p style="font-size: 16px; font-weight: 600; color: #111827; margin: 0;"><%= @trip.destination.presence || "未設定" %></p>
    </div>

    <div>
      <p style="font-size: 13px; color: #6b7280; margin: 0 0 4px;">期間</p>
      <p style="font-size: 16px; color: #111827; margin: 0;"><%= [@trip.start_date&.strftime("%Y/%m/%d"), @trip.end_date&.strftime("%Y/%m/%d")].compact.join(" 〜 ") %></p>
    </div>
  </div>

  <% default_tab = @default_tab.presence || "itinerary" %>
  <% tab_active_style = [
    "padding: 10px 14px",
    "border-radius: 9999px",
    "font-size: 14px",
    "font-weight: 700",
    "border: 1px solid #2563eb",
    "color: #0f172a",
    "background: #eff6ff",
    "box-shadow: 0 6px 20px rgba(37,99,235,0.12)",
    "cursor: pointer"
  ].join('; ') %>
  <% tab_inactive_style = [
    "padding: 10px 14px",
    "border-radius: 9999px",
    "font-size: 14px",
    "font-weight: 600",
    "border: 1px solid #e5e7eb",
    "color: #4b5563",
    "background: #ffffff",
    "cursor: pointer"
  ].join('; ') %>

  <div data-controller="tabs" data-tabs-default="<%= default_tab %>" style="margin-top: 20px;">
    <div role="tablist" style="display: flex; gap: 8px; flex-wrap: wrap; margin: 0 0 12px;">
      <button type="button"
        id="tab-itinerary"
        role="tab"
        aria-selected="true"
        aria-controls="tab-panel-itinerary"
        tabindex="0"
        data-action="tabs#switch"
        data-tabs-target="tab"
        data-tab-id="itinerary"
        data-tabs-id-param="itinerary"
        data-tabs-active-style="<%= tab_active_style %>"
        data-tabs-inactive-style="<%= tab_inactive_style %>"
        style="<%= tab_active_style %>">旅程</button>
      <button type="button"
        id="tab-packing"
        role="tab"
        aria-selected="false"
        aria-controls="tab-panel-packing"
        tabindex="-1"
        data-action="tabs#switch"
        data-tabs-target="tab"
        data-tab-id="packing"
        data-tabs-id-param="packing"
        data-tabs-active-style="<%= tab_active_style %>"
        data-tabs-inactive-style="<%= tab_inactive_style %>"
        style="<%= tab_inactive_style %>">持ち物</button>
      <button type="button"
        id="tab-memo"
        role="tab"
        aria-selected="false"
        aria-controls="tab-panel-memo"
        tabindex="-1"
        data-action="tabs#switch"
        data-tabs-target="tab"
        data-tab-id="memo"
        data-tabs-id-param="memo"
        data-tabs-active-style="<%= tab_active_style %>"
        data-tabs-inactive-style="<%= tab_inactive_style %>"
        style="<%= tab_inactive_style %>">メモ</button>
    </div>

    <div role="tabpanel" id="tab-panel-itinerary" aria-labelledby="tab-itinerary" data-tabs-target="panel" data-tab-id="itinerary">
      <div style="display: grid; gap: 12px;">
        <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
          <h2 style="font-size: 20px; font-weight: 800; color: #111827; margin: 0;">旅程</h2>
          <%= link_to "＋ 活動を追加", new_trip_activity_path(@trip), style: [
            "padding: 10px 14px",
            "border-radius: 10px",
            "border: 1px solid #2563eb",
            "background: #eff6ff",
            "color: #1d4ed8",
            "font-size: 14px",
            "font-weight: 700",
            "text-decoration: none",
            "box-shadow: 0 2px 6px rgba(37,99,235,0.12)"
          ].join('; ') %>
        </div>
        <% if @activities.present? %>
          <div style="display: grid; gap: 12px;">
            <%= render @activities %>
          </div>
        <% else %>
          <div style="border: 1px dashed #d1d5db; border-radius: 12px; padding: 16px; background: #f9fafb; text-align: center;">
            <p style="margin: 0 0 6px; font-size: 15px; font-weight: 700; color: #111827;">まだ旅程がありません</p>
            <p style="margin: 0; font-size: 13px; color: #6b7280;">予定を追加するとここに表示されます。</p>
          </div>
        <% end %>
      </div>
    </div>

    <div role="tabpanel" id="tab-panel-packing" aria-labelledby="tab-packing" data-tabs-target="panel" data-tab-id="packing">
      <div style="display: grid; gap: 12px;">
        <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
          <h2 style="font-size: 20px; font-weight: 800; color: #111827; margin: 0;">持ち物</h2>
        </div>
        <div style="border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px 14px; background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.03);">
          <%= render "packing_items/inline_form", trip: @trip, packing_item: @packing_item || @trip.packing_items.build %>
        </div>
        <% if @packing_items.present? %>
          <div style="display: grid; gap: 10px;">
            <%= render @packing_items %>
          </div>
        <% else %>
          <div style="border: 1px dashed #d1d5db; border-radius: 12px; padding: 16px; background: #f9fafb; text-align: center;">
            <p style="margin: 0 0 6px; font-size: 15px; font-weight: 700; color: #111827;">まだ持ち物がありません</p>
            <p style="margin: 0; font-size: 13px; color: #6b7280;">追加するとここに表示されます。</p>
          </div>
        <% end %>
      </div>
    </div>

    <div role="tabpanel" id="tab-panel-memo" aria-labelledby="tab-memo" data-tabs-target="panel" data-tab-id="memo">
      <div style="display: grid; gap: 12px;">
        <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
          <h2 style="font-size: 20px; font-weight: 800; color: #111827; margin: 0;">メモ</h2>
        </div>
        <div style="border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.03);">
          <%= form_with model: @trip, url: trip_path(@trip), method: :patch, html: { style: "display: grid; gap: 12px;" } do |form| %>
            <%= hidden_field_tag :source, "memo" %>
            <%= form.text_area :notes, rows: 6, placeholder: "旅のメモを入力できます", style: "width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 10px; font-size: 15px; color: #111827; background: #fff; line-height: 1.6; resize: vertical; box-shadow: inset 0 1px 2px rgba(0,0,0,0.02);" %>
            <div style="display: flex; justify-content: flex-end;">
              <%= form.submit "保存する", style: "display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 18px; background: #2563eb; color: #fff; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; box-shadow: 0 10px 25px rgba(37,99,235,0.18); width: 100%; max-width: 240px; transition: transform 0.08s ease, box-shadow 0.08s ease;", data: { turbo_submits_with: "保存中..." } %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
