<% trip_color = trip.color.presence || "#4c6ef5" %>
<% start_date = trip.start_date %>
<% end_date = trip.end_date %>
<% date_range =
  if start_date.present? && end_date.present?
    if start_date.year == end_date.year
      if start_date.month == end_date.month
        "#{start_date.year}年#{start_date.month}月#{start_date.day}日〜#{end_date.day}日"
      else
        "#{start_date.year}年#{start_date.month}月#{start_date.day}日〜#{end_date.month}月#{end_date.day}日"
      end
    else
      "#{start_date.year}年#{start_date.month}月#{start_date.day}日〜#{end_date.year}年#{end_date.month}月#{end_date.day}日"
    end
  elsif start_date.present?
    "#{start_date.year}年#{start_date.month}月#{start_date.day}日"
  elsif end_date.present?
    "#{end_date.year}年#{end_date.month}月#{end_date.day}日"
  else
    "未設定"
  end %>

<%= link_to trip_path(trip), style: "text-decoration: none; color: inherit;" do %>
  <div class="trip-card" style="border: 1px solid #e5e7eb; border-radius: 24px; background: #fff; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04); transition: box-shadow 0.2s ease;">
    <div class="trip-card-color" style="background: linear-gradient(135deg, <%= trip_color %> 0%, #f3f4f6 100%);"></div>
    <div class="trip-card-body" style="padding: 20px 24px; flex: 1; display: flex; flex-direction: column; justify-content: center;">
      <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
        <div style="width: 10px; height: 10px; border-radius: 9999px; background: <%= trip_color %>;"></div>
        <span style="font-size: 13px; color: #6b7280; font-weight: 600;"><%= trip.destination.presence || "未設定" %></span>
      </div>
      <h3 style="font-size: 22px; font-weight: 800; color: #111827; margin: 0 0 12px;"><%= trip.title %></h3>
      <p style="font-size: 14px; color: #6b7280; display: flex; align-items: center; gap: 8px; margin: 0;">
        <%= icon("calendar", size: 18) %>
        <span><%= date_range %></span>
      </p>
    </div>
    <div class="trip-card-chevron" style="align-items: center; padding: 0 24px; color: #d1d5db; font-size: 22px;">
      &gt;
    </div>
  </div>
<% end %>
