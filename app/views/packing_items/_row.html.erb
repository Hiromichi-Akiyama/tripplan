<% checkbox_label = packing_item.checked ? "チェック済み" : "未チェック" %>
<% name_style = [
  "margin: 0",
  "font-size: 16px",
  "font-weight: 700",
  "color: #{packing_item.checked ? '#6b7280' : '#111827'}",
  "text-decoration: #{packing_item.checked ? 'line-through' : 'none'}",
  "line-height: 1.4"
].join('; ') %>
<% container_style = [
  "border: 1px solid #e5e7eb",
  "border-radius: 16px",
  "padding: 14px 16px",
  "background: #{packing_item.checked ? '#f9fafb' : '#ffffff'}",
  "box-shadow: 0 2px 8px rgba(0,0,0,0.04)",
  "display: flex",
  "align-items: center",
  "gap: 12px",
  "justify-content: space-between",
  "flex-wrap: wrap",
  "opacity: #{packing_item.checked ? '0.78' : '1'}"
].join('; ') %>

<div style="<%= container_style %>">
  <div style="display: flex; align-items: center; gap: 12px; flex: 1; min-width: 220px;">
    <%= form_with model: [packing_item.trip, packing_item], url: trip_packing_item_path(packing_item.trip, packing_item, tab: "packing"), method: :patch, data: { turbo: true }, style: "margin: 0;" do |f| %>
      <label style="display: inline-flex; align-items: center; gap: 10px; cursor: pointer;">
        <%= f.check_box :checked, {
          onchange: "this.form.requestSubmit()",
          aria: { label: checkbox_label },
          style: "width: 20px; height: 20px; margin: 0; accent-color: #3b82f6;",
          include_hidden: true
        }, "1", "0" %>
        <p style="<%= name_style %>"><%= packing_item.name %></p>
      </label>
    <% end %>
  </div>

  <%= button_to trip_packing_item_path(packing_item.trip, packing_item), method: :delete,
    data: { turbo_confirm: "この持ち物を削除しますか？" },
    form: { style: "margin: 0;" },
    style: [
      "width: 28px",
      "height: 28px",
      "border-radius: 9999px",
      "border: 1px solid #fecaca",
      "background: #fef2f2",
      "color: #dc2626",
      "cursor: pointer",
      "display: inline-flex",
      "align-items: center",
      "justify-content: center"
    ].join('; ') do %>
    <%= icon("x", size: 14) %>
  <% end %>
</div>
