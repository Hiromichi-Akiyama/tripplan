<%= form_with model: [trip, packing_item], html: { novalidate: true, style: "margin: 0;" } do |form| %>
  <% name_error = packing_item.errors[:name].present? %>
  <% category_error = packing_item.errors[:category].present? %>
  <% name_error_message = packing_item.errors.full_messages_for(:name).first %>
  <% category_error_message = packing_item.errors.full_messages_for(:category).first %>

  <div style="display: flex; flex-wrap: wrap; gap: 10px; align-items: flex-start;">
    <div style="flex: 1 1 240px; min-width: 200px;">
      <%= form.text_field :name, required: true, placeholder: "アイテム名", style: [
        "width: 100%",
        "max-width: 100%",
        "box-sizing: border-box",
        "padding: 12px 14px",
        "border: 1px solid #{name_error ? '#fca5a5' : '#d1d5db'}",
        "border-radius: 12px",
        "font-size: 15px",
        "color: #111827",
        "background: #fff",
        "box-shadow: inset 0 1px 2px rgba(0,0,0,0.02)"
      ].join('; ') %>
      <% if name_error %>
        <p style="color: #b91c1c; font-size: 12px; margin: 6px 0 0;"><%= name_error_message %></p>
      <% end %>
    </div>

    <div style="flex: 1 1 180px; min-width: 160px;">
      <%= form.select :category, options_for_select(PackingItem::CATEGORIES, packing_item.category), { include_blank: "カテゴリを選択" }, style: [
        "width: 100%",
        "max-width: 100%",
        "box-sizing: border-box",
        "padding: 12px 14px",
        "border: 1px solid #{category_error ? '#fca5a5' : '#d1d5db'}",
        "border-radius: 12px",
        "font-size: 15px",
        "color: #111827",
        "background: #fff",
        "box-shadow: inset 0 1px 2px rgba(0,0,0,0.02)"
      ].join('; ') %>
      <% if category_error %>
        <p style="color: #b91c1c; font-size: 12px; margin: 6px 0 0;"><%= category_error_message %></p>
      <% end %>
    </div>

    <div style="display: flex; justify-content: flex-end;">
      <%= form.submit "追加する", style: "display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 16px; background: #3b82f6; color: #fff; border: none; border-radius: 12px; font-size: 15px; font-weight: 700; cursor: pointer; box-shadow: 0 6px 16px rgba(59,130,246,0.2); min-width: 120px; transition: transform 0.08s ease, box-shadow 0.08s ease;", data: { turbo_submits_with: "追加中..." } %>
    </div>
  </div>
<% end %>
