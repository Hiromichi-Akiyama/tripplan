<% time_label =
  if activity.start_time.present? && activity.end_time.present?
    "#{activity.start_time.strftime('%H:%M')}〜#{activity.end_time.strftime('%H:%M')}"
  elsif activity.start_time.present?
    "#{activity.start_time.strftime('%H:%M')}〜"
  elsif activity.end_time.present?
    "〜#{activity.end_time.strftime('%H:%M')}"
  else
    "時刻未設定"
  end %>

<%= link_to trip_activity_path(activity.trip, activity), class: "itinerary-row", style: [
  "display: flex",
  "gap: 16px",
  "align-items: flex-start",
  "padding: 16px",
  "border: 1px solid #e5e7eb",
  "border-radius: 16px",
  "background: #ffffff",
  "cursor: pointer",
  "text-decoration: none",
  "color: inherit",
  "transition: box-shadow 0.2s ease"
].join('; ') do %>
  <div class="itinerary-row-time" style="flex: 0 0 auto; width: 160px; color: #374151; font-weight: 600; font-size: 15px; white-space: nowrap; display: inline-flex; align-items: center; gap: 6px; font-variant-numeric: tabular-nums;">
    <%= icon("clock", size: 16) %>
    <%= time_label %>
  </div>
  <div class="itinerary-row-content" style="flex: 1; min-width: 160px;">
    <p style="margin: 0 0 4px; font-size: 16px; font-weight: 700; color: #111827; line-height: 1.4;"><%= activity.title %></p>
    <% if activity.location.present? %>
      <p style="margin: 0; font-size: 14px; color: #6b7280; display: inline-flex; align-items: center; gap: 6px;">
        <%= icon("map_pin", size: 14) %>
        <span><%= activity.location %></span>
      </p>
    <% end %>
  </div>
  <div class="itinerary-row-meta" style="display: flex; align-items: flex-start; gap: 12px; margin-left: auto; align-self: stretch; position: relative; padding-right: 40px;">
    <% if activity.cost.present? %>
      <div class="itinerary-row-cost" style="flex-shrink: 0; text-align: right;">
        <p style="margin: 0; font-size: 16px; font-weight: 700; color: #111827;">
          <%= number_to_currency(activity.cost, unit: "¥", precision: 0) %>
        </p>
      </div>
    <% end %>
    <span class="itinerary-row-chevron" style="color: #9ca3af; font-size: 20px; line-height: 1; position: absolute; right: 6px; top: 50%; transform: translateY(-50%);">&gt;</span>
  </div>
<% end %>
