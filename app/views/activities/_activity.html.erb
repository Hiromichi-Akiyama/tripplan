<% date_label = activity.date&.strftime("%Y/%m/%d") %>
<% start_label = activity.start_time&.strftime("%H:%M") %>
<% end_label   = activity.end_time&.strftime("%H:%M") %>
<% time_text =
  if start_label && end_label
    "#{start_label} - #{end_label}"
  elsif start_label
    "#{start_label} 〜"
  elsif end_label
    "〜 #{end_label}"
  else
    "時刻未設定"
  end %>

<div style="border: 1px solid #e5e7eb; border-radius: 16px; padding: 16px; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.04); display: grid; gap: 10px;">
  <div style="display: flex; align-items: center; justify-content: space-between; gap: 10px; flex-wrap: wrap;">
    <div style="display: flex; align-items: baseline; gap: 12px; flex-wrap: wrap;">
      <p style="margin: 0; font-size: 13px; color: #6b7280;">日付: <span style="color: #111827; font-weight: 600;"><%= date_label %></span></p>
      <p style="margin: 0; font-size: 13px; color: #6b7280;">時刻: <span style="color: #111827; font-weight: 600;"><%= time_text %></span></p>
    </div>
    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
      <%= link_to "編集", edit_trip_activity_path(activity.trip, activity), style: [
        "padding: 6px 10px",
        "border-radius: 10px",
        "border: 1px solid #e5e7eb",
        "background: #f3f4f6",
        "color: #374151",
        "font-size: 13px",
        "font-weight: 600",
        "text-decoration: none"
      ].join('; ') %>
      <%= button_to "削除", trip_activity_path(activity.trip, activity), method: :delete,
        data: { turbo_confirm: "このアクティビティを削除しますか？" },
        form: { style: "margin: 0;" },
        style: [
          "padding: 6px 10px",
          "border-radius: 10px",
          "border: 1px solid #fecaca",
          "background: #fef2f2",
          "color: #dc2626",
          "font-size: 13px",
          "font-weight: 700",
          "cursor: pointer"
        ].join('; ') %>
    </div>
  </div>

  <p style="margin: 0; font-size: 16px; font-weight: 700; color: #111827; line-height: 1.4;"><%= activity.title %></p>

  <div style="display: flex; gap: 10px; flex-wrap: wrap; font-size: 12px; color: #4b5563;">
    <% if activity.location.present? %>
      <span style="display: inline-flex; align-items: center; gap: 6px; background: #f3f4f6; border-radius: 9999px; padding: 6px 12px;">📍 <%= activity.location %></span>
    <% end %>
    <% if activity.cost.present? %>
      <span style="display: inline-flex; align-items: center; gap: 6px; background: #eef2ff; color: #4338ca; border-radius: 9999px; padding: 6px 12px;">💰 <%= number_to_currency(activity.cost, unit: "¥", precision: 0) %></span>
    <% end %>
  </div>
</div>
